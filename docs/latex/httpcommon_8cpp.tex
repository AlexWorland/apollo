\doxysection{/\+Users/alexworland/auto\+Bitrate/apollo/src/httpcommon.cpp File Reference}
\hypertarget{httpcommon_8cpp}{}\label{httpcommon_8cpp}\index{/Users/alexworland/autoBitrate/apollo/src/httpcommon.cpp@{/Users/alexworland/autoBitrate/apollo/src/httpcommon.cpp}}


Definitions for common HTTP.  


{\ttfamily \#include $<$filesystem$>$}\newline
{\ttfamily \#include $<$utility$>$}\newline
{\ttfamily \#include $<$boost/asio/ssl/context.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/asio/ssl/context\+\_\+base.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/property\+\_\+tree/json\+\_\+parser.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/property\+\_\+tree/ptree.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/property\+\_\+tree/xml\+\_\+parser.\+hpp$>$}\newline
{\ttfamily \#include $<$curl/curl.\+h$>$}\newline
{\ttfamily \#include $<$Simple-\/\+Web-\/\+Server/server\+\_\+http.\+hpp$>$}\newline
{\ttfamily \#include $<$Simple-\/\+Web-\/\+Server/server\+\_\+https.\+hpp$>$}\newline
{\ttfamily \#include "{}config.\+h"{}}\newline
{\ttfamily \#include "{}crypto.\+h"{}}\newline
{\ttfamily \#include "{}file\+\_\+handler.\+h"{}}\newline
{\ttfamily \#include "{}httpcommon.\+h"{}}\newline
{\ttfamily \#include "{}logging.\+h"{}}\newline
{\ttfamily \#include "{}network.\+h"{}}\newline
{\ttfamily \#include "{}nvhttp.\+h"{}}\newline
{\ttfamily \#include "{}platform/common.\+h"{}}\newline
{\ttfamily \#include "{}process.\+h"{}}\newline
{\ttfamily \#include "{}rtsp.\+h"{}}\newline
{\ttfamily \#include "{}utility.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{httpcommon_8cpp_a771bd8615e485560bc89b3fd0d08b1dd}{http\+::reload\+\_\+user\+\_\+creds}} (const std\+::string \&file)
\begin{DoxyCompactList}\small\item\em Reload user credentials from file. \end{DoxyCompactList}\item 
\Hypertarget{httpcommon_8cpp_ac0c4c239842a455aa609d924925756ec}\label{httpcommon_8cpp_ac0c4c239842a455aa609d924925756ec} 
bool {\bfseries http\+::user\+\_\+creds\+\_\+exist} (const std\+::string \&file)
\item 
int \mbox{\hyperlink{httpcommon_8cpp_aa61e6ae8cfe73f4cec10fd6f0a956ba8}{http\+::init}} ()
\begin{DoxyCompactList}\small\item\em Initialize the HTTP subsystem. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{httpcommon_8cpp_aac33b12b7563df384b470c49fc7433ca}{http\+::save\+\_\+user\+\_\+creds}} (const std\+::string \&file, const std\+::string \&username, const std\+::string \&password, bool run\+\_\+our\+\_\+mouth=false)
\begin{DoxyCompactList}\small\item\em Save user credentials to file. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{httpcommon_8cpp_a5549fc1f082c9d21a910228ffe144047}{http\+::create\+\_\+creds}} (const std\+::string \&pkey, const std\+::string \&cert)
\begin{DoxyCompactList}\small\item\em Create credentials from private key and certificate. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{httpcommon_8cpp_a110384dd82351644c83a1283091d7d7d}{http\+::download\+\_\+file}} (const std\+::string \&url, const std\+::string \&file, long ssl\+\_\+version=CURL\+\_\+\+SSLVERSION\+\_\+\+TLSv1\+\_\+2)
\begin{DoxyCompactList}\small\item\em Download a file from a URL. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{httpcommon_8cpp_a6e66f07d8c89637cf295cec849bb73f2}{http\+::url\+\_\+escape}} (const std\+::string \&url)
\begin{DoxyCompactList}\small\item\em URL-\/escape a string. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{httpcommon_8cpp_a6febf425259b50e439a71aca25d611dc}{http\+::url\+\_\+get\+\_\+host}} (const std\+::string \&url)
\begin{DoxyCompactList}\small\item\em Extract the host from a URL. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{httpcommon_8cpp_a343a124c613eb26d3b348b26f2949e3c}\label{httpcommon_8cpp_a343a124c613eb26d3b348b26f2949e3c} 
std\+::string {\bfseries http\+::unique\+\_\+id}
\begin{DoxyCompactList}\small\item\em Unique identifier for this instance. \end{DoxyCompactList}\item 
\Hypertarget{httpcommon_8cpp_a3b54c9936ddd69a26b817830e120cf0e}\label{httpcommon_8cpp_a3b54c9936ddd69a26b817830e120cf0e} 
\mbox{\hyperlink{unionuuid__util_1_1uuid__t}{uuid\+\_\+util\+::uuid\+\_\+t}} {\bfseries http\+::uuid}
\begin{DoxyCompactList}\small\item\em UUID for this instance. \end{DoxyCompactList}\item 
\Hypertarget{httpcommon_8cpp_a8fc17e96b4b8e01fc666734280716dfe}\label{httpcommon_8cpp_a8fc17e96b4b8e01fc666734280716dfe} 
\mbox{\hyperlink{network_8h_af265c335edb963e60ec75f612b9eef13}{net\+::net\+\_\+e}} {\bfseries http\+::origin\+\_\+web\+\_\+ui\+\_\+allowed}
\begin{DoxyCompactList}\small\item\em Network origin allowed for Web UI access. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Definitions for common HTTP. 



\label{doc-func-members}
\Hypertarget{httpcommon_8cpp_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{httpcommon_8cpp_a5549fc1f082c9d21a910228ffe144047}\index{httpcommon.cpp@{httpcommon.cpp}!create\_creds@{create\_creds}}
\index{create\_creds@{create\_creds}!httpcommon.cpp@{httpcommon.cpp}}
\doxysubsubsection{\texorpdfstring{create\_creds()}{create\_creds()}}
{\footnotesize\ttfamily \label{httpcommon_8cpp_a5549fc1f082c9d21a910228ffe144047} 
int http\+::create\+\_\+creds (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{pkey}{, }\item[{const std\+::string \&}]{cert}{}\end{DoxyParamCaption})}



Create credentials from private key and certificate. 


\begin{DoxyParams}{Parameters}
{\em pkey} & The private key in PEM format. \\
\hline
{\em cert} & The certificate in PEM format. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero on error. 
\end{DoxyReturn}
\Hypertarget{httpcommon_8cpp_a110384dd82351644c83a1283091d7d7d}\index{httpcommon.cpp@{httpcommon.cpp}!download\_file@{download\_file}}
\index{download\_file@{download\_file}!httpcommon.cpp@{httpcommon.cpp}}
\doxysubsubsection{\texorpdfstring{download\_file()}{download\_file()}}
{\footnotesize\ttfamily \label{httpcommon_8cpp_a110384dd82351644c83a1283091d7d7d} 
bool http\+::download\+\_\+file (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{url}{, }\item[{const std\+::string \&}]{file}{, }\item[{long}]{ssl\+\_\+version}{ = {\ttfamily CURL\+\_\+SSLVERSION\+\_\+TLSv1\+\_\+2}}\end{DoxyParamCaption})}



Download a file from a URL. 


\begin{DoxyParams}{Parameters}
{\em url} & The URL to download from. \\
\hline
{\em file} & The local file path to save to. \\
\hline
{\em ssl\+\_\+version} & The SSL/\+TLS version to use (default\+: TLSv1.\+2). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily true} on success, {\ttfamily false} on error. 
\end{DoxyReturn}
\Hypertarget{httpcommon_8cpp_aa61e6ae8cfe73f4cec10fd6f0a956ba8}\index{httpcommon.cpp@{httpcommon.cpp}!init@{init}}
\index{init@{init}!httpcommon.cpp@{httpcommon.cpp}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily \label{httpcommon_8cpp_aa61e6ae8cfe73f4cec10fd6f0a956ba8} 
int http\+::init (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Initialize the HTTP subsystem. 

\begin{DoxyReturn}{Returns}
0 on success, non-\/zero on error. 
\end{DoxyReturn}
\Hypertarget{httpcommon_8cpp_a771bd8615e485560bc89b3fd0d08b1dd}\index{httpcommon.cpp@{httpcommon.cpp}!reload\_user\_creds@{reload\_user\_creds}}
\index{reload\_user\_creds@{reload\_user\_creds}!httpcommon.cpp@{httpcommon.cpp}}
\doxysubsubsection{\texorpdfstring{reload\_user\_creds()}{reload\_user\_creds()}}
{\footnotesize\ttfamily \label{httpcommon_8cpp_a771bd8615e485560bc89b3fd0d08b1dd} 
int http\+::reload\+\_\+user\+\_\+creds (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{file}{}\end{DoxyParamCaption})}



Reload user credentials from file. 


\begin{DoxyParams}{Parameters}
{\em file} & The file path to load credentials from. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero on error. 
\end{DoxyReturn}
\Hypertarget{httpcommon_8cpp_aac33b12b7563df384b470c49fc7433ca}\index{httpcommon.cpp@{httpcommon.cpp}!save\_user\_creds@{save\_user\_creds}}
\index{save\_user\_creds@{save\_user\_creds}!httpcommon.cpp@{httpcommon.cpp}}
\doxysubsubsection{\texorpdfstring{save\_user\_creds()}{save\_user\_creds()}}
{\footnotesize\ttfamily \label{httpcommon_8cpp_aac33b12b7563df384b470c49fc7433ca} 
int http\+::save\+\_\+user\+\_\+creds (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{file}{, }\item[{const std\+::string \&}]{username}{, }\item[{const std\+::string \&}]{password}{, }\item[{bool}]{run\+\_\+our\+\_\+mouth}{ = {\ttfamily false}}\end{DoxyParamCaption})}



Save user credentials to file. 


\begin{DoxyParams}{Parameters}
{\em file} & The file path to save credentials to. \\
\hline
{\em username} & The username. \\
\hline
{\em password} & The password. \\
\hline
{\em run\+\_\+our\+\_\+mouth} & Whether to print credentials to stdout (default\+: false). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, non-\/zero on error. 
\end{DoxyReturn}
\Hypertarget{httpcommon_8cpp_a6e66f07d8c89637cf295cec849bb73f2}\index{httpcommon.cpp@{httpcommon.cpp}!url\_escape@{url\_escape}}
\index{url\_escape@{url\_escape}!httpcommon.cpp@{httpcommon.cpp}}
\doxysubsubsection{\texorpdfstring{url\_escape()}{url\_escape()}}
{\footnotesize\ttfamily \label{httpcommon_8cpp_a6e66f07d8c89637cf295cec849bb73f2} 
std\+::string http\+::url\+\_\+escape (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{url}{}\end{DoxyParamCaption})}



URL-\/escape a string. 


\begin{DoxyParams}{Parameters}
{\em url} & The string to escape. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
URL-\/escaped string. 
\end{DoxyReturn}
\Hypertarget{httpcommon_8cpp_a6febf425259b50e439a71aca25d611dc}\index{httpcommon.cpp@{httpcommon.cpp}!url\_get\_host@{url\_get\_host}}
\index{url\_get\_host@{url\_get\_host}!httpcommon.cpp@{httpcommon.cpp}}
\doxysubsubsection{\texorpdfstring{url\_get\_host()}{url\_get\_host()}}
{\footnotesize\ttfamily \label{httpcommon_8cpp_a6febf425259b50e439a71aca25d611dc} 
std\+::string http\+::url\+\_\+get\+\_\+host (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{url}{}\end{DoxyParamCaption})}



Extract the host from a URL. 


\begin{DoxyParams}{Parameters}
{\em url} & The URL string. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The host portion of the URL. 
\end{DoxyReturn}
